# EDSåŠ¨æ€è¿½è¸ªæœåŠ¡ï¼ˆcron.rpcï¼‰

## ğŸ”–ç®€ä»‹

> EDS éƒ¨åˆ†åŠŸèƒ½ä¾èµ–äºå¤–éƒ¨æœºæ„å®šæœŸã€ä¸å®šæœŸå‘å¸ƒçš„æ•°æ®ï¼Œäººä¸ºå½•å…¥å­˜åœ¨æ—¶æ•ˆæ€§ã€å‡†ç¡®æ€§å’Œé‡å¤æ€§å›°éš¾ï¼Œå¼€å‘åŠ¨æ€è¿½è¸ªæœåŠ¡ï¼ˆcron.rpcï¼‰è§£å†³æ­¤ç±»é—®é¢˜ã€‚

  
ğŸŒ å¼•ç”¨èµ„æºï¼š

|ç±»å‹æ ‡è¯†|åç§°|æ•°æ®æº|
|-|-|-|
|dlgd|ä»£ç†è´­ç”µ|[å›½å®¶ç”µç½‘](https://95598.cn/osgweb/index) / [å—æ–¹ç”µç½‘](https://95598.csg.cn/)|
|twdl|å°æ¹¾ç”µåŠ›|[å°æ¹¾é›»åŠ›å…¬å¸-é›»åƒ¹è¡¨ / é›»åƒ¹æ—¥æ›†è¡¨](https://99z.top/https://www.taipower.com.tw/2289/2290/46940/46945/normalPost)|
|holiday|èŠ‚å‡æ—¥|[å„å›½å‡æœŸæ—¥å†](https://holidays-calendar.net/)|
|weather|å¤©æ°”é¢„æŠ¥|[ä¸­å¤®æ°”è±¡å°](http://www.nmc.cn/)|
|carbon|å¤§é™†ç¢³æ’å› å­|[å›½å®¶ç¢³æ’å› å­åº“](https://data.ncsc.org.cn/factoryes/index)|
|tw-carbon|å°æ¹¾ç¢³æ’å› å­|[ç¶“æ¿Ÿéƒ¨èƒ½æºç½² - æ¸©å®¤æ°”ä½“](https://www.moeaea.gov.tw/ecw/populace/content/SubMenu.aspx?menu_id=114)|
|pdf24|è½¬Excel/Word|[å…è´¹ï¼Œå•å…ƒæ ¼åº•çº¹ä¿ç•™ğŸ‘](https://tools.pdf24.org/zh/pdf-to-excel)|
|99z.top|ä»£ç†è®¿é—®|[å…è´¹ï¼Œç¨³å®š](https://99z.top/)|
|aliyun|æ–‡ä»¶æ ¼å¼è½¬æ¢|[æ”¶è´¹ï¼Œæ–‡æœ¬è¯†åˆ«å‡†ç¡®ç‡é«˜](https://docmind.console.aliyun.com/doc-overview)|

## ğŸ¼å‰ææ¡ä»¶

æ”¿åºœç±»ç½‘ç«™å…·æœ‰è¾ƒå¼ºçš„åçˆ¬è™«æœºåˆ¶ï¼Œç”¨[ chromedp ](https://github.com/chromedp/chromedp)æ¨¡æ‹Ÿäººä¸ºæ“ä½œï¼Œé€šè¿‡ç‚¹å‡»ã€è·³è½¬å’Œé€‰æ‹©ç­‰åŠ¨ä½œæå–ç½‘é¡µå…³é”®å…ƒç´ ã€‚

**è¿è¡Œä¾èµ–**ï¼š

- æœ¬åœ°éœ€å®‰è£… Chrome/Chromium æˆ–å…¼å®¹æµè§ˆå™¨ï¼ˆå¦‚ Edgeï¼‰
- æ„å»º Docker é•œåƒæ—¶éœ€å®‰è£… chromedp æ‰€éœ€çš„ä¾èµ–ï¼ˆChromium + å¿…è¦åº“ï¼‰

## ğŸ¸æ¥å£åˆ—è¡¨

### ç”¨ç”µæ¡£æ¡ˆ

- åŸºäºç”¨ç”µæ¡£æ¡ˆè·å¾—ç”µä»·å’Œè´¦å•ä¿¡æ¯ã€‚å½“ç”¨æˆ·å­˜åœ¨å¤šä¸ªæˆ·å·æ—¶ï¼Œæ¯ä¸ªå·¥ç¨‹IDå¯ä»¥æœ‰å¤šä¸ªç”¨ç”µæ¡£æ¡ˆï¼Œç”¨ **area**ï¼ˆå·¥ç¨‹åŒºåŸŸã€æ”¯è·¯åç§°ï¼‰åŒºåˆ†ã€‚  

ï¼ˆç¤ºä¾‹ï¼‰å¦é—¨å£«æ—ç”µæœºæœ‰ä¸¤ä¸ªæˆ·å·ï¼šå£«æ—å‚å’Œæˆå®‡å‚ï¼Œæ¯ä¸ªæˆ·å·ä¸‹å‡å«ä¸¤ä¸ªå˜å‹å™¨ï¼Œå…¶ **capacity**ï¼ˆåˆåŒå®¹é‡ï¼‰ä¸ºä¸‹è¾–å˜å‹å™¨å®¹é‡ä¹‹å’Œã€‚

```json
{
    "account": "edsdemo",                            // å·¥ç¨‹ID
    "area": "æˆå®‡å‚",                                 // å·¥ç¨‹åŒºåŸŸã€æ”¯è·¯åç§°
    "category": "ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>1-10ï¼ˆ20ï¼‰åƒä¼",    // ç”¨ç”µç±»åˆ«
    "powerFactor": 0.9,                              // [å¤§é™†]åŠŸç‡å› æ•°æ ‡å‡†
    "capacity": 1260,                                // [å¤§é™†]åˆåŒå®¹é‡
    "demand": 0,                                     // [å¤§é™†]åˆåŒéœ€é‡
    "installedCap": 0,                               // [å°æ¹¾]è£…ç½®å¥‘çº¦
    "regularCap": 0,                                 // [å°æ¹¾]å¸¸è§„å¥‘çº¦
    "nonSummerCap": 0,                               // [å°æ¹¾]éå¤å­£å¥‘çº¦
    "semiPeakCap": 0,                                // [å°æ¹¾]åŠå°–å³°å¥‘çº¦
    "satSemiPeakCap": 0,                             // [å°æ¹¾]å‘¨å…­åŠå°–å³°å¥‘çº¦
    "offPeakCap": 0,                                 // [å°æ¹¾]ç¦»å³°å¥‘çº¦
    "id": 2
}

```

### GetAvailableOptionsï¼ˆè·å–ç”¨ç”µæ¡£æ¡ˆå¯é€‰é¡¹ï¼‰

- åŸºäºç”¨æˆ·åœ°å€è·å¾—ç”¨ç”µæ¡£æ¡ˆå¯é€‰é¡¹ï¼Œåœ°å€åº”åŒ…å«çœä»½ã€åŸå¸‚ã€åŒºå¿ç­‰ä¿¡æ¯
  
  - âœ… ç¦å»ºçœå¦é—¨å¸‚é›†ç¾åŒºå­™å‚å—è·¯92å·

  - âœ… å°åŒ—å¸‚ä¸­å±±åŒ—è·¯å…­æ®µ88è™Ÿ16æ¨“ï¼ˆå°æ¹¾åœ°åŒºå¯ä»¥ä»å¸‚çº§å¼€å§‹ï¼‰

  - âŒ å¦é—¨å¸‚é›†ç¾åŒºå­™å‚å—è·¯92å·ï¼ˆå¤§é™†åœ°åŒºå¿…é¡»å«çœçº§ä¿¡æ¯ï¼‰
  
```json
// Request
{
    "address": "ç¦å»ºçœå¦é—¨å¸‚é›†ç¾åŒºå­™å‚å—è·¯92å·"
}

// Response
{
    "categories": [
        "ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>1-10ï¼ˆ20ï¼‰åƒä¼",,
        "ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>35åƒä¼"
        "ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>110åƒä¼",
        "ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>220åƒä¼åŠä»¥ä¸Š"
    ],
    "powerFactors": [0.8, 0.85, 0.9]        // [å¤§é™†]åŠŸç‡å› æ•°æ ‡å‡†
}

```

### GetUserOptionï¼ˆè·å–ç”¨ç”µæ¡£æ¡ˆï¼‰

```json
// Request
{
    "account":"edsdemo",
    "area":"æˆå®‡å‚"
}
```

### å…¶ä»–

#### AddUserOptionï¼ˆæ–°å¢ç”¨ç”µæ¡£æ¡ˆï¼‰| UpdateUserOptionï¼ˆæ›´æ–°ç”¨ç”µæ¡£æ¡ˆï¼‰| DeleteUserOptionï¼ˆåˆ é™¤ç”¨ç”µæ¡£æ¡ˆï¼‰

### GetCarbonï¼ˆè·å–ç¢³æ’å› å­ï¼‰

- ç¢³æ’å› å­å»¶è¿Ÿå‘å¸ƒï¼Œå¦‚2025å¹´å‘å¸ƒ2024å¹´æ•°æ®ï¼›è‹¥æŒ‡å®šå¹´ä»½æ— æ•°æ®ï¼Œè¿”å›æœ€æ–°å¹´ä»½æ•°æ®ã€‚

```json
// Request
{
    "address": "ç¦å»ºçœå¦é—¨å¸‚é›†ç¾åŒºå­™å‚å—è·¯92å·",
    "year": 2025                                    // å¯é€‰ï¼Œç¼ºçœæ—¶è¿”å›æœ€æ–°å€¼
}

// Response
{
    "value": 0.4092                                // å®ä¸º2022å¹´æ•°æ®
}
```

### GetPriceï¼ˆè·å–ç”µä»·ï¼‰

```json
// Request1
{
    "category":"ç¦å»º>å·¥å•†ä¸š,ä¸¤éƒ¨åˆ¶>1-10ï¼ˆ20ï¼‰åƒä¼",
    "time":"2025-08-01 00:00:00"                    // æŸ¥è¯¢æ—¶é—´ï¼Œç¼ºçœæ—¶ä¸ºå½“å‰æ—¶é—´
}

// Response1
{
    "name": "valley",        // æ‰€å±æ—¶æ®µï¼Œå¯é€‰å€¼ï¼šdeep, valley, flat, peak, sharp
    "price": 0.34861174,     // æ—¶æ®µç”µä»·
    "desc": "è°·æ®µ",          // æ—¶æ®µæè¿°, å¯é€‰å€¼ï¼šæ·±è°·ï¼Œè°·æ®µ, å¹³æ®µ, å³°æ®µ, å°–æ®µ
    "color": "#27AE60",      // æ—¶æ®µè‰²å—
}

// Request2
{
    "category":"ä½å£“é›»åŠ›é›»åƒ¹>æ™‚é–“é›»åƒ¹>ä¸‰æ®µå¼",
    "time":"2025-08-01 00:00:00"
}

// Response2
{
    "name": "weekdayOffPeak",  // æ‰€å±æ—¶æ®µï¼Œå¯é€‰å€¼ï¼šweekdayPeak, weekdaySemiPeak, weekdayOffPeak, satSemiPeak, satOffPeak, sunOffPeak
    "price": 2.23,
    "desc": "å¹³æ—¥ç¦»å³°",         // æ—¶æ®µæè¿°, å¯é€‰å€¼ï¼šå¹³æ—¥å°–å³°, å¹³æ—¥åŠå°–å³°, å¹³æ—¥ç¦»å³°, å‘¨å…­åŠå°–å³°, å‘¨å…­ç¦»å³°, å‡æ—¥ç¦»å³°
    "color": "#27AE60"
}

```

### GetMonthlyBillï¼ˆè·å–æœˆåº¦è´¦å•ï¼‰

```json
// Request
{
    "account": "edsdemo",
    "area": "æˆå®‡å‚",
    "month": "2025-08",             // è´¦å•å‘¨æœŸï¼Œæ ¼å¼: 2006-01
    "ep30ms": [10.0, 20.0, 20.0],   // æ­£å‘æœ‰åŠŸåˆ†æ®µå€¼ï¼Œæ¯30åˆ†é’Ÿä¸€ä¸ªç‚¹ï¼Œä»æ¯æœˆ1æ—¥0æ—¶èµ·
    "eqTotal": 100.0                // [å¤§é™†]æ€»æ— åŠŸï¼ˆQ1+Q4è±¡é™ï¼‰
}

// Response
{
    "fee": 10000.0,                 // æœ¬æœŸç”µè´¹
    "basicFee": 1000.0,             // åŸºç¡€è´¹ç”¨
    "usageFee": 8000.0,             // ç”µé‡ç”µè´¹
    "pfFee": -1000.0,               // åŠŸç‡å› æ•°è°ƒæ•´ç”µè´¹ï¼šå¥–åŠ±(<0), ç½šæ¬¾(>0)
    "stageFee": 2000.0,             // é˜¶æ¢¯è´¹ç”¨
    "usage": 20000.0,               // æœ¬æœŸç”µé‡
    "details": [                    // åˆ†æ—¶ç”µé‡ç”µè´¹åˆ—è¡¨
        {
            "name": "valley",
            "price": 0.34861174,
            "desc": "è°·æ®µ",
            "color": "#27AE60",
            "usage": 30000.0
        }
    ]
}

```

### GetWeathersï¼ˆè·å–å¤©æ°”ï¼‰

```json
// Request
{
    "address": "ç¦å»ºçœå¦é—¨å¸‚é›†ç¾åŒºå­™å‚å—è·¯92å·",
    "date": "2025-08-01",                       // èµ·å§‹æ—¥æœŸï¼Œç¼ºçœæ—¶ä¸ºå½“å‰æ—¥æœŸ
    "size": 1,                                  // å¤©æ•°ï¼Œç¼ºçœæ—¶ä¸º1å¤©
}

// Response
{
    "weathers": [
        {
            "date": "2025-08-01",
            "dayWeather": "é›·é˜µé›¨",
            "dayTemp": 33,                      // ç™½å¤©æœ€é«˜æ¸©åº¦
            "nightWeather": "å¤šäº‘",
            "nightTemp": 26,                    // æ™šä¸Šæœ€ä½æ¸©åº¦
        }
    ]
}
```
